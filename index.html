<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-localize="title">Aerocoin (AERO) - The Deflationary Scarcity on BSC</title>
    <!-- Carga de librer铆as esenciales -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Definici贸n de colores de tema */
        :root {
            /* Colores Base (Dark Mode Defaults) */
            --bg-dark: #0f172a; /* Slate 900 */
            --bg-light: #f1f5f9; /* Slate 100 */
            --text-dark: #f1f5f9; /* Slate 100 */
            --text-light: #1e293b; /* Slate 800 */
            --primary-blue: #3b82f6; /* Blue 500 */
            --secondary-blue: #93c5fd; /* Blue 300 */
            --accent-red: #ef4444; /* Red 500 */
            --accent-green: #10b981; /* Emerald 500 */
            --accent-orange: #f97316; /* Orange 500 */
            --border-color: #334155; /* Slate 700 */
            --card-bg: #1e293b; /* Slate 800 */
            --input-bg: #334155; /* Slate 700 */
            --box-shadow: rgba(0, 0, 0, 0.5);
            
            /* Colores por defecto (Modo Oscuro) */
            --bg-color: var(--bg-dark);
            --main-text-color: var(--text-dark);
            --secondary-bg: var(--card-bg);
            --nav-bg: var(--bg-dark);
        }

        /* Modo Claro: Alto Contraste */
        body.light-mode {
            --bg-color: var(--bg-light);
            --main-text-color: var(--text-light);
            --secondary-bg: #ffffff; /* Blanco puro */
            --border-color: #cbd5e1; /* Slate 300 */
            --nav-bg: var(--bg-light);
            --card-bg: #f8fafc; /* Slate 50 */
            --input-bg: #e2e8f0; /* Slate 200 */
            --box-shadow: rgba(0, 0, 0, 0.1);

            /* Inversi贸n espec铆fica de colores para alto contraste en Modo Claro */
            .text-aero-light { color: var(--text-light); }
            .text-gray-300 { color: #475569; } /* Slate 600 */
            .text-gray-500 { color: #64748b; } /* Slate 600 */
            .text-gray-400 { color: #64748b; } /* Slate 600 */
            .bg-gray-700\/50 { background-color: rgba(226, 232, 240, 0.5); } /* Slate 200/50 */
            .bg-gray-700 { background-color: var(--input-bg); }
        }

        /* Estilos generales */
        body {
            background-color: var(--bg-color);
            color: var(--main-text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        .section-bg-dark {
            background-color: var(--secondary-bg);
        }

        .section-bg-light {
            background-color: var(--bg-color);
        }

        .card-bg {
            background-color: var(--card-bg);
            border-color: var(--border-color);
            box-shadow: 0 10px 15px -3px var(--box-shadow);
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        .card-border-primary {
            border-top-color: var(--primary-blue);
        }
        
        .card-border-accent {
            border-top-color: var(--accent-red);
        }

        .card-border-green {
            border-top-color: var(--accent-green);
        }

        .card-border-orange {
            border-top-color: var(--accent-orange);
        }

        .input-style {
            background-color: var(--input-bg);
            border-color: var(--border-color);
            color: var(--main-text-color);
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .text-aero-blue { color: var(--primary-blue); }
        .text-aero-light { color: var(--main-text-color); }
        .text-aero-green { color: var(--accent-green); }
        .text-aero-orange { color: var(--accent-orange); }
        .bg-aero-blue { background-color: var(--primary-blue); }
        .bg-aero-green { background-color: var(--accent-green); }
        .bg-aero-orange { background-color: var(--accent-orange); }
        .text-red-400 { color: var(--accent-red); }
        .bg-red-600 { background-color: var(--accent-red); }

        /* Estilos para el chat: Asegurar legibilidad en ambos modos */
        #chatMessages .bg-gray-700 {
            background-color: var(--input-bg);
            color: var(--main-text-color);
        }
        body.light-mode #chatMessages .bg-gray-700 {
            background-color: var(--input-bg);
            color: var(--text-light);
        }
        
        #chatMessages .bg-red-900\/50 {
            background-color: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }
        body.light-mode #chatMessages .bg-red-900\/50 {
            background-color: rgba(239, 68, 68, 0.1); 
            color: var(--accent-red);
        }

        /* Estilos de botones para contraste */
        .btn-primary {
            background-color: var(--primary-blue);
            color: var(--bg-dark);
        }
        .btn-secondary {
            background-color: var(--input-bg);
            color: var(--main-text-color);
        }
        
        /* Animaci贸n para airdrops */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 5px var(--accent-green); }
            50% { box-shadow: 0 0 20px var(--accent-green); }
        }
        
        .airdrop-glow {
            animation: pulse-glow 2s infinite;
        }

        /* Modal de autenticaci贸n */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
        }
        
        /* Botones de autenticaci贸n */
        .auth-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            margin-bottom: 12px;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        
        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .auth-btn-google {
            background: white;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .auth-btn-google:hover {
            background: #f8f9fa;
        }
        
        .auth-btn-apple {
            background: black;
            color: white;
            border: 1px solid #333;
        }
        
        .auth-btn-apple:hover {
            background: #1a1a1a;
        }
        
        .auth-btn-logout {
            background: var(--accent-red);
            color: white;
            border: none;
        }
        
        .auth-btn-logout:hover {
            background: #dc2626;
        }
        
        /* Avatar de usuario */
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary-blue);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Estado de autenticaci贸n */
        .auth-required {
            position: relative;
        }
        
        .auth-required::after {
            content: "";
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 12px;
        }
    </style>
    <script type="module">
        // Importaciones de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            signInAnonymously, 
            onAuthStateChanged,
            GoogleAuthProvider,
            signInWithPopup,
            signInWithRedirect,
            getRedirectResult,
            signOut,
            OAuthProvider
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            query, 
            onSnapshot, 
            where, 
            getDocs, 
            setDoc, 
            doc, 
            Timestamp, 
            orderBy, 
            getDoc,
            updateDoc
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Configuraci贸n de Firebase ---
        const firebaseConfig = {
            apiKey: "AIzaSyBIGUo2-YFCHKF6Nc8I-lB_NmGZiQ5pHJI",
            authDomain: "cryptotracker-8a6fd.firebaseapp.com",
            projectId: "cryptotracker-8a6fd",
            storageBucket: "cryptotracker-8a6fd.firebasestorage.app",
            messagingSenderId: "720112375781",
            appId: "1:720112375781:web:671a4ee88c6f5830ea810c",
            measurementId: "G-ESKLZRK9P0"
        };

        // --- Constantes de Tokenomics ---
        const INITIAL_HOLDER_COUNT = 18;
        const HOLDER_GOAL = 10000;
        const TOTAL_SUPPLY_BASE = 800000;
        const MONTHLY_BURN = 100;

        // --- Configuraci贸n de AI (Gemini) ---
        const GEMINI_API_KEY = "AIzaSyCwPJYCrdIbhUvObM0SP6R58TYjTGT3HVg";
        const GEMINI_MODEL = "gemini-2.5-flash-preview-09-2025";
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`;
        
        // --- Configuraci贸n de colecciones ---
        const AIRDROPS_COLLECTION = "aerocoin_airdrops";
        const VOTES_COLLECTION = "aerocoin_burn_votes";
        const CHAT_COLLECTION = "aerocoin_chat";
        const BURN_EVENTS_COLLECTION = "aerocoin_burn_events";
        const APP_STATS_COLLECTION = "aerocoin_stats";
        const USERS_COLLECTION = "aerocoin_users";
        
        let db, auth;
        let currentUser = null;
        let isAuthReady = false;
        
        // Variables globales
        window.remainingTokens = TOTAL_SUPPLY_BASE.toLocaleString();
        window.burnedTokens = '0';
        window.progressPercent = '0.0000';
        window.nextAirdropAmount = 1;
        window.totalBurned = 0;
        window.userProfile = null;

        // Proveedores de autenticaci贸n
        const googleProvider = new GoogleAuthProvider();
        const appleProvider = new OAuthProvider('apple.com');
        
        // Configurar Apple para web
        appleProvider.addScope('email');
        appleProvider.addScope('name');

        async function initializeFirebase() {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // Verificar si hay resultado de redirecci贸n (para Apple)
                getRedirectResult(auth).then((result) => {
                    if (result) {
                        // Usuario autenticado por redirecci贸n
                        console.log("User authenticated via redirect:", result.user);
                    }
                }).catch((error) => {
                    console.error("Redirect auth error:", error);
                });

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        currentUser = user;
                        isAuthReady = true;
                        console.log("User authenticated:", user.uid, user.email);
                        
                        // Cargar o crear perfil de usuario
                        await loadOrCreateUserProfile(user);
                        
                        // Actualizar UI
                        updateAuthUI();
                        
                        // Cargar datos de la app
                        loadInitialData();
                        loadAirdrops();
                        loadBurnVotes();
                        setupDatePicker();
                        loadChatMessages();
                        checkAndExecuteBurns();
                        loadAppStats();
                        
                        // Ocultar modal si est谩 abierto
                        hideAuthModal();

                    } else {
                        currentUser = null;
                        isAuthReady = true;
                        window.userProfile = null;
                        console.log("User signed out");
                        
                        // Mostrar modal de autenticaci贸n si no hay usuario
                        showAuthModal();
                        
                        // Actualizar UI
                        updateAuthUI();
                    }
                    
                    window.db = db;
                    window.isAuthReady = isAuthReady;
                });

            } catch (error) {
                console.error("Error initializing Firebase:", error);
            }
        }
        
        // --- Gesti贸n de perfiles de usuario ---
        async function loadOrCreateUserProfile(user) {
            if (!db || !user) return;
            
            try {
                const userRef = doc(db, USERS_COLLECTION, user.uid);
                const userDoc = await getDoc(userRef);
                
                if (userDoc.exists()) {
                    window.userProfile = userDoc.data();
                    console.log("User profile loaded:", window.userProfile);
                } else {
                    // Crear nuevo perfil de usuario
                    const newUserProfile = {
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName || `User_${user.uid.substring(0, 6)}`,
                        photoURL: user.photoURL || null,
                        provider: user.providerData[0]?.providerId || 'unknown',
                        createdAt: Timestamp.now(),
                        lastLogin: Timestamp.now(),
                        totalAirdropsClaimed: 0,
                        totalVotesCast: 0,
                        address: null // Direcci贸n BSC vinculada
                    };
                    
                    await setDoc(userRef, newUserProfile);
                    window.userProfile = newUserProfile;
                    console.log("New user profile created:", newUserProfile);
                }
                
                // Actualizar 煤ltima conexi贸n
                await updateDoc(userRef, {
                    lastLogin: Timestamp.now()
                });
                
            } catch (error) {
                console.error("Error loading/creating user profile:", error);
            }
        }
        
        // --- Autenticaci贸n con Google ---
        window.signInWithGoogle = async () => {
            try {
                const result = await signInWithPopup(auth, googleProvider);
                console.log("Google sign in successful:", result.user);
                
                // Notificar en chat
                await notifySystemMessage(`${result.user.displayName || 'Usuario'} se ha conectado con Google`);
                
            } catch (error) {
                console.error("Error signing in with Google:", error);
                showMessage('authError', translations[window.currentLanguage].auth_google_error, 'error');
            }
        };
        
        // --- Autenticaci贸n con Apple ---
        window.signInWithApple = async () => {
            try {
                // Apple requiere redirecci贸n en algunos entornos
                await signInWithRedirect(auth, appleProvider);
                
            } catch (error) {
                console.error("Error signing in with Apple:", error);
                
                // Intentar con popup como fallback
                try {
                    const result = await signInWithPopup(auth, appleProvider);
                    console.log("Apple sign in successful:", result.user);
                    
                    // Notificar en chat
                    await notifySystemMessage(`${result.user.displayName || 'Usuario'} se ha conectado con Apple`);
                    
                } catch (popupError) {
                    console.error("Apple popup error:", popupError);
                    showMessage('authError', translations[window.currentLanguage].auth_apple_error, 'error');
                }
            }
        };
        
        // --- Cerrar sesi贸n ---
        window.signOutUser = async () => {
            try {
                if (currentUser) {
                    // Notificar en chat antes de cerrar sesi贸n
                    await notifySystemMessage(`${currentUser.displayName || 'Usuario'} ha cerrado sesi贸n`);
                }
                
                await signOut(auth);
                showMessage('authSuccess', translations[window.currentLanguage].auth_logout_success, 'success');
                
            } catch (error) {
                console.error("Error signing out:", error);
                showMessage('authError', translations[window.currentLanguage].auth_logout_error, 'error');
            }
        };
        
        // --- Notificar mensajes del sistema ---
        async function notifySystemMessage(message) {
            if (!db) return;
            
            try {
                const chatRef = collection(db, CHAT_COLLECTION);
                await addDoc(chatRef, {
                    message: message,
                    senderId: 'System',
                    timestamp: Timestamp.now(),
                    isSystem: true,
                });
            } catch (error) {
                console.error("Error sending system message:", error);
            }
        }
        
        // --- UI de autenticaci贸n ---
        function updateAuthUI() {
            const authButton = document.getElementById('authButton');
            const userInfo = document.getElementById('userInfo');
            const airdropButton = document.getElementById('airdropButton');
            const voteButton = document.getElementById('voteButton');
            
            if (currentUser && window.userProfile) {
                // Usuario autenticado
                if (authButton) authButton.classList.add('hidden');
                if (userInfo) {
                    userInfo.classList.remove('hidden');
                    
                    const userName = document.getElementById('userName');
                    const userAvatar = document.getElementById('userAvatar');
                    
                    if (userName) {
                        userName.textContent = window.userProfile.displayName || 
                                              currentUser.email || 
                                              currentUser.uid.substring(0, 8);
                    }
                    
                    if (userAvatar) {
                        if (window.userProfile.photoURL) {
                            userAvatar.src = window.userProfile.photoURL;
                            userAvatar.classList.remove('hidden');
                        } else {
                            userAvatar.classList.add('hidden');
                        }
                    }
                }
                
                // Habilitar botones que requieren autenticaci贸n
                if (airdropButton) {
                    airdropButton.disabled = false;
                    airdropButton.classList.remove('auth-required');
                }
                if (voteButton) {
                    voteButton.disabled = false;
                    voteButton.classList.remove('auth-required');
                }
                
            } else {
                // Usuario no autenticado
                if (authButton) authButton.classList.remove('hidden');
                if (userInfo) userInfo.classList.add('hidden');
                
                // Deshabilitar botones que requieren autenticaci贸n
                if (airdropButton) {
                    airdropButton.disabled = true;
                    airdropButton.classList.add('auth-required');
                }
                if (voteButton) {
                    voteButton.disabled = true;
                    voteButton.classList.add('auth-required');
                }
            }
        }
        
        // --- Modal de autenticaci贸n ---
        function showAuthModal() {
            // Solo mostrar si no hay usuario
            if (currentUser) return;
            
            const modal = document.getElementById('authModal');
            if (modal) {
                modal.classList.remove('hidden');
            }
        }
        
        function hideAuthModal() {
            const modal = document.getElementById('authModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }
        
        window.closeAuthModal = () => {
            hideAuthModal();
        };
        
        // --- Mostrar mensajes ---
        function showMessage(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            element.textContent = message;
            element.classList.remove('hidden', 'text-green-500', 'text-red-500', 'text-yellow-500');
            
            switch(type) {
                case 'success':
                    element.classList.add('text-green-500');
                    break;
                case 'error':
                    element.classList.add('text-red-500');
                    break;
                case 'warning':
                    element.classList.add('text-yellow-500');
                    break;
                default:
                    element.classList.add('text-blue-500');
            }
            
            // Auto-ocultar despu茅s de 5 segundos
            setTimeout(() => {
                element.classList.add('hidden');
            }, 5000);
        }

        // --- Cargar datos iniciales de la app ---
        async function loadAppStats() {
            if (!window.db || !window.isAuthReady) return;

            try {
                const statsRef = doc(window.db, APP_STATS_COLLECTION, "current_stats");
                const statsDoc = await getDoc(statsRef);
                
                if (statsDoc.exists()) {
                    const stats = statsDoc.data();
                    window.totalBurned = stats.totalBurned || 0;
                    window.nextAirdropAmount = stats.nextAirdropAmount || 1;
                    updateSupplyCounters();
                } else {
                    // Inicializar estad铆sticas si no existen
                    await setDoc(statsRef, {
                        totalBurned: 0,
                        nextAirdropAmount: 1,
                        lastUpdated: Timestamp.now()
                    });
                }
                
            } catch (error) {
                console.error("Error loading app stats:", error);
            }
        }
        
        // --- Actualizar estad铆sticas de la app ---
        async function updateAppStats() {
            if (!window.db || !window.isAuthReady) return;

            try {
                const statsRef = doc(window.db, APP_STATS_COLLECTION, "current_stats");
                await setDoc(statsRef, {
                    totalBurned: window.totalBurned,
                    nextAirdropAmount: window.nextAirdropAmount,
                    lastUpdated: Timestamp.now()
                }, { merge: true });
                
            } catch (error) {
                console.error("Error updating app stats:", error);
            }
        }

        // --- Cargar datos iniciales ---
        async function loadInitialData() {
            updateSupplyCounters();
        }

        // --- Actualizar contadores de suministro ---
        function updateSupplyCounters() {
            window.burnedTokens = window.totalBurned.toLocaleString();
            window.remainingTokens = (window.TOTAL_SUPPLY_BASE - window.totalBurned).toLocaleString();
            window.progressPercent = ((window.totalBurned / window.TOTAL_SUPPLY_BASE) * 100).toFixed(4);
            
            // Actualizar barra de progreso
            const progressBar = document.getElementById('countdownProgressBar');
            if (progressBar) progressBar.style.width = `${window.progressPercent}%`;
            
            // Actualizar texto de progreso
            const progressText = document.getElementById('countdownProgressText');
            if (progressText) {
                progressText.textContent = `${window.progressPercent}% Quemado`;
            }
            
            // Actualizar todos los textos con la nueva informaci贸n
            window.setLanguage(window.currentLanguage);
        }

        // --- Verificar y ejecutar quemas pendientes ---
        async function checkAndExecuteBurns() {
            if (!window.db || !window.isAuthReady) return;

            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            
            try {
                // Buscar votos cuya fecha ya pas贸 y no han sido ejecutados
                const votesRef = collection(window.db, VOTES_COLLECTION);
                const votesQuery = query(votesRef);
                
                const snapshot = await getDocs(votesQuery);
                const votesByMonth = {};
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    if (data.date) {
                        const voteDate = new Date(data.date + 'T00:00:00Z');
                        const voteMonthKey = `${voteDate.getUTCFullYear()}-${String(voteDate.getUTCMonth() + 1).padStart(2, '0')}`;
                        
                        if (!votesByMonth[voteMonthKey]) {
                            votesByMonth[voteMonthKey] = [];
                        }
                        votesByMonth[voteMonthKey].push({...data, id: doc.id});
                    }
                });
                
                // Para cada mes, verificar si la fecha ganadora ya pas贸
                for (const [monthKey, votes] of Object.entries(votesByMonth)) {
                    if (votes.length === 0) continue;
                    
                    // Encontrar la fecha con m谩s votos
                    const voteCounts = {};
                    votes.forEach(vote => {
                        voteCounts[vote.date] = (voteCounts[vote.date] || 0) + 1;
                    });
                    
                    let winningDate = null;
                    let maxVotes = 0;
                    Object.entries(voteCounts).forEach(([date, count]) => {
                        if (count > maxVotes) {
                            maxVotes = count;
                            winningDate = date;
                        }
                    });
                    
                    if (winningDate) {
                        const burnDate = new Date(winningDate + 'T00:00:00Z');
                        
                        // Verificar si la fecha ya pas贸 y si ya no hay evento de quema para este mes
                        if (burnDate < today) {
                            const burnMonthKey = `${burnDate.getUTCFullYear()}-${String(burnDate.getUTCMonth() + 1).padStart(2, '0')}`;
                            
                            // Verificar si ya existe un evento de quema para este mes
                            const burnEventsRef = collection(window.db, BURN_EVENTS_COLLECTION);
                            const burnCheckQuery = query(burnEventsRef, where("month", "==", burnMonthKey));
                            const burnSnapshot = await getDocs(burnCheckQuery);
                            
                            if (burnSnapshot.empty) {
                                // Ejecutar la quema
                                await executeBurn(winningDate, burnMonthKey, votes);
                            }
                        }
                    }
                }
                
                // Cargar historial de quemas
                loadBurnEvents();
                
            } catch (error) {
                console.error("Error checking and executing burns:", error);
            }
        }

        // --- Ejecutar quema real ---
        async function executeBurn(date, monthKey, votes) {
            try {
                // 1. Registrar evento de quema
                const burnEventsRef = collection(window.db, BURN_EVENTS_COLLECTION);
                await addDoc(burnEventsRef, {
                    date: date,
                    month: monthKey,
                    amount: window.MONTHLY_BURN,
                    executedAt: Timestamp.now(),
                    totalVotes: votes.length,
                    winningVotes: votes.filter(v => v.date === date).length
                });
                
                // 2. Actualizar contadores
                window.totalBurned += window.MONTHLY_BURN;
                updateSupplyCounters();
                await updateAppStats();
                
                // 3. Notificar en el chat
                const chatRef = collection(window.db, CHAT_COLLECTION);
                const monthName = new Date(`${monthKey}-01`).toLocaleString(window.currentLanguage === 'es' ? 'es-ES' : 'en-US', { month: 'long', year: 'numeric' });
                
                await addDoc(chatRef, {
                    message: ` 隆QUEMA EJECUTADA! Se han quemado ${window.MONTHLY_BURN} AERO como resultado de la votaci贸n de ${monthName}. Fecha ganadora: ${date}`,
                    senderId: 'System',
                    timestamp: Timestamp.now(),
                    isSystem: true,
                });
                
                console.log(`Burn executed for ${date}: ${window.MONTHLY_BURN} AERO burned`);
                
            } catch (error) {
                console.error("Error executing burn:", error);
            }
        }

        // --- Cargar eventos de quema ejecutados ---
        async function loadBurnEvents() {
            if (!window.db || !window.isAuthReady) return;

            const burnEventsRef = collection(window.db, BURN_EVENTS_COLLECTION);
            const burnEventsQuery = query(burnEventsRef, orderBy("executedAt", "desc"));

            onSnapshot(burnEventsQuery, (snapshot) => {
                const historyContainer = document.getElementById('burnHistoryList');
                historyContainer.innerHTML = '';
                
                if (snapshot.empty) {
                    historyContainer.innerHTML = `<p class="text-gray-500 italic p-4" data-localize="history_no_data"></p>`;
                    return;
                }
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const monthName = new Date(data.date + 'T00:00:00Z').toLocaleString(window.currentLanguage === 'es' ? 'es-ES' : 'en-US', { month: 'long', year: 'numeric' });
                    
                    const item = document.createElement('div');
                    item.className = 'border-b pb-4 mb-4 border-gray-700/50 last:border-b-0';
                    item.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="font-bold text-lg text-red-400"> ${monthName}</p>
                                <p class="text-sm text-aero-light mt-1">
                                    <span data-localize="history_winning_date">Fecha ganadora:</span> 
                                    <span class="font-mono ml-2">${data.date}</span>
                                </p>
                                <p class="text-sm text-aero-light">
                                    <span data-localize="history_total_votes">Votos totales:</span> 
                                    <span class="font-mono ml-2">${data.totalVotes || 0}</span>
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-red-400">-${data.amount} AERO</p>
                                <p class="text-xs text-gray-500 mt-1">
                                    ${data.executedAt?.toDate().toLocaleDateString() || ''}
                                </p>
                            </div>
                        </div>
                    `;
                    historyContainer.appendChild(item);
                });
                
                window.setLanguage(window.currentLanguage);
                
            }, (error) => {
                console.error("Error loading burn events:", error);
            });
        }

        // --- Airdrops Logic con autenticaci贸n ---
        function loadAirdrops() {
            if (!window.db || !window.isAuthReady) return;

            const airdropsRef = collection(window.db, AIRDROPS_COLLECTION);
            const airdropsQuery = query(airdropsRef, orderBy("claimedAt", "desc"));

            onSnapshot(airdropsQuery, (snapshot) => {
                const airdrops = [];
                snapshot.forEach((doc) => {
                    airdrops.push({...doc.data(), id: doc.id});
                });
                
                const airdropCount = airdrops.length;
                const totalHolders = window.INITIAL_HOLDER_COUNT + airdropCount;
                
                // Actualizar contador de holders
                document.getElementById('holdersCount').textContent = totalHolders.toLocaleString();
                
                // Actualizar meta de holders
                document.getElementById('holdersGoalText').textContent = `${totalHolders.toLocaleString()} / ${window.HOLDER_GOAL.toLocaleString()}`;
                
                // Actualizar barra de progreso
                const progress = (totalHolders / window.HOLDER_GOAL) * 100;
                document.getElementById('holdersProgressBar').style.width = `${Math.min(progress, 100)}%`;

                // Actualizar UI de airdrops
                updateAirdropsUI(airdrops);

                window.setLanguage(window.currentLanguage);
            }, (error) => {
                console.error("Error reading airdrops from Firestore: ", error);
                document.getElementById('holdersCount').textContent = "Error";
            });
        }

        function updateAirdropsUI(airdrops) {
            // Actualizar bot贸n de airdrop
            const airdropButton = document.getElementById('airdropButton');
            if (airdropButton) {
                airdropButton.textContent = translations[window.currentLanguage].btn_airdrop.replace('{amount}', window.nextAirdropAmount);
            }
            
            // Actualizar t铆tulo y descripci贸n
            const airdropTitleElement = document.getElementById('airdropTitle');
            const airdropDescElement = document.getElementById('airdropDesc');
            if (airdropTitleElement) {
                airdropTitleElement.innerHTML = translations[window.currentLanguage].airdrop_title.replace('{amount}', window.nextAirdropAmount);
            }
            if (airdropDescElement) {
                airdropDescElement.innerHTML = translations[window.currentLanguage].airdrop_desc.replace('{amount}', window.nextAirdropAmount);
            }
            
            // Actualizar lista de airdrops
            updateAirdropsList(airdrops);
        }

        function updateAirdropsList(airdrops) {
            const listContainer = document.getElementById('airdropAddressesList');
            listContainer.innerHTML = '';
            
            if (airdrops.length === 0) {
                listContainer.innerHTML = `<p class="text-gray-500 italic" data-localize="airdrop_address_placeholder"></p>`;
            } else {
                const recentAirdrops = airdrops.slice(0, 5);
                
                recentAirdrops.forEach(airdrop => {
                    const fullAddress = airdrop.address;
                    const claimedAmount = airdrop.amount;
                    const percentage = (claimedAmount / window.TOTAL_SUPPLY_BASE) * 100;
                    const timeAgo = getTimeAgo(airdrop.claimedAt);
                    
                    const listItem = document.createElement('li');
                    listItem.className = 'flex flex-col sm:flex-row justify-between items-start sm:items-center p-3 rounded-lg text-sm font-mono break-all bg-gray-700/50 hover:bg-gray-700 transition duration-150 mb-2';
                    listItem.innerHTML = `
                        <div class="w-full sm:w-2/3">
                            <span class="text-aero-light block mb-1" title="${fullAddress}">${fullAddress}</span>
                            <span class="text-xs text-gray-400">${timeAgo}</span>
                        </div>
                        <div class="flex items-center mt-2 sm:mt-0 justify-end w-full sm:w-1/3 space-x-2">
                            <span class="text-aero-green font-bold text-sm whitespace-nowrap">
                                +${claimedAmount} AERO
                                <span class="text-gray-400 text-xs">(${percentage.toFixed(6)}%)</span>
                            </span>
                            <span class="text-aero-green text-lg flex-shrink-0" title="Airdrop: ${claimedAmount} AERO"></span>
                        </div>
                    `;
                    listContainer.appendChild(listItem);
                });
            }
        }

        function getTimeAgo(timestamp) {
            if (!timestamp) return '';
            const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
            const now = new Date();
            const seconds = Math.floor((now - date) / 1000);
            
            let interval = Math.floor(seconds / 31536000);
            if (interval >= 1) return interval + (window.currentLanguage === 'es' ? ' a帽os' : ' years');
            
            interval = Math.floor(seconds / 2592000);
            if (interval >= 1) return interval + (window.currentLanguage === 'es' ? ' meses' : ' months');
            
            interval = Math.floor(seconds / 86400);
            if (interval >= 1) return interval + (window.currentLanguage === 'es' ? ' d铆as' : ' days');
            
            interval = Math.floor(seconds / 3600);
            if (interval >= 1) return interval + (window.currentLanguage === 'es' ? ' horas' : ' hours');
            
            interval = Math.floor(seconds / 60);
            if (interval >= 1) return interval + (window.currentLanguage === 'es' ? ' minutos' : ' minutes');
            
            return (window.currentLanguage === 'es' ? 'Ahora' : 'Just now');
        }

        // --- Burn Vote Logic con autenticaci贸n ---
        function getNextMonthFirstDay() {
            const date = new Date();
            const nextMonth = new Date(date.getFullYear(), date.getMonth() + 1, 1);
            return nextMonth.toISOString().split('T')[0];
        }

        function getNextMonthLastDay() {
            const date = new Date();
            const lastDay = new Date(date.getFullYear(), date.getMonth() + 2, 0);
            return lastDay.toISOString().split('T')[0];
        }
        
        function setupDatePicker() {
            const input = document.getElementById('burnDateInput');
            const firstDay = getNextMonthFirstDay();
            const lastDay = getNextMonthLastDay();
            
            input.setAttribute('min', firstDay);
            input.setAttribute('max', lastDay);
            input.value = firstDay;
        }

        function loadBurnVotes() {
            if (!window.db || !window.isAuthReady) return;

            const votesRef = collection(window.db, VOTES_COLLECTION);
            const votesQuery = query(votesRef);
            
            const resultsContainer = document.getElementById('votingResults');
            const winningDateElement = document.getElementById('winningDate');
            const totalVotesElement = document.getElementById('totalVotesCount');

            onSnapshot(votesQuery, (snapshot) => {
                const currentVotesMap = {};
                
                const today = new Date();
                const nextMonth = today.getMonth() + 1;
                const nextYear = today.getFullYear() + (nextMonth === 12 ? 1 : 0);

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const dateKey = data.date;
                    
                    if (dateKey) {
                        // Solo contar votos para el pr贸ximo mes
                        const dateObj = new Date(dateKey + 'T00:00:00Z');
                        const voteMonth = dateObj.getUTCMonth();
                        const voteYear = dateObj.getUTCFullYear();
                        
                        if (voteYear === nextYear && voteMonth === nextMonth % 12) {
                            currentVotesMap[dateKey] = (currentVotesMap[dateKey] || 0) + 1;
                        }
                    }
                });
                
                const totalCurrentVotes = Object.values(currentVotesMap).reduce((a, b) => a + b, 0);
                totalVotesElement.textContent = totalCurrentVotes.toLocaleString();

                // Resultados actuales
                resultsContainer.innerHTML = '';
                let winningDate = translations[window.currentLanguage].vote_no_votes;
                let maxVotes = -1;
                
                const sortedVotesArray = Object.entries(currentVotesMap).sort(([, a], [, b]) => b - a);

                if (sortedVotesArray.length === 0) {
                    resultsContainer.innerHTML = `<p class="text-gray-500 italic p-4" data-localize="vote_no_votes_full"></p>`;
                } else {
                    sortedVotesArray.forEach(([date, count]) => {
                        const percent = totalCurrentVotes > 0 ? ((count / totalCurrentVotes) * 100).toFixed(1) : 0;
                        if (count > maxVotes) {
                            maxVotes = count;
                            winningDate = date;
                        }

                        const bar = document.createElement('div');
                        bar.className = 'mb-3';
                        bar.innerHTML = `
                            <div class="flex justify-between text-sm mb-1">
                                <span class="font-mono text-aero-light">${date}</span>
                                <span class="font-bold text-aero-blue">${count} vote${count !== 1 ? 's' : ''} (${percent}%)</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-2.5">
                                <div class="bg-aero-blue h-2.5 rounded-full transition-all duration-500" style="width: ${percent}%;"></div>
                            </div>
                        `;
                        resultsContainer.appendChild(bar);
                    });
                }
                winningDateElement.innerHTML = winningDate;
                
                window.setLanguage(window.currentLanguage);
                
            }, (error) => {
                console.error("Error loading votes from Firestore:", error);
                winningDateElement.innerHTML = "Error";
            });
        }

        // --- Chat/Forum Logic ---
        function loadChatMessages() {
            if (!window.db || !window.isAuthReady) return;

            const chatRef = collection(window.db, CHAT_COLLECTION);
            const chatQuery = query(chatRef, orderBy("timestamp", "asc"));

            const chatContainer = document.getElementById('chatMessages');

            onSnapshot(chatQuery, (snapshot) => {
                chatContainer.innerHTML = '';
                const fragment = document.createDocumentFragment();
                
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const message = data.message;
                    const senderId = data.senderId;
                    const isSystem = data.isSystem;
                    
                    const time = data.timestamp ? data.timestamp.toDate().toLocaleTimeString(window.currentLanguage === 'es' ? 'es-ES' : 'en-US', { hour: '2-digit', minute: '2-digit' }) : '';
                    
                    const senderDisplay = isSystem 
                        ? (window.currentLanguage === 'es' ? 'Sistema' : 'System') 
                        : (senderId ? senderId.substring(0, 6) + '...' : 'Anon');
                    
                    const msgDiv = document.createElement('div');
                    const msgBgClass = isSystem ? 'bg-red-900/50 text-red-300' : 'bg-gray-700 text-white';
                    const msgAlignment = isSystem ? 'justify-end' : 'justify-start';

                    msgDiv.className = `p-3 rounded-lg max-w-[90%] break-words shadow-md ${msgBgClass} ${isSystem ? 'italic' : ''} self-start`;
                    msgDiv.innerHTML = `
                        <p class="text-xs font-bold ${isSystem ? 'text-red-300' : 'text-aero-blue'}">${senderDisplay} <span class="text-gray-400 text-xs font-light ml-2">${time}</span></p>
                        <p class="mt-1 text-sm text-aero-light">${message}</p>
                    `;
                    
                    const wrapper = document.createElement('div');
                    wrapper.className = `flex ${msgAlignment} mb-3 w-full`;
                    wrapper.appendChild(msgDiv);
                    fragment.appendChild(wrapper);
                });

                chatContainer.appendChild(fragment);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, (error) => {
                console.error("Error loading chat messages:", error);
                chatContainer.innerHTML = `<p class="text-red-500 p-4" data-localize="chat_error"></p>`;
                window.setLanguage(window.currentLanguage);
            });
        }
        
        // --- Gemini AI Functions ---
        async function getGeminiResponse(userQuery) {
            const systemPrompt = "You are the Aerocoin AI expert. Provide concise and helpful answers related to Aerocoin, its deflationary mechanics, tokenomics, or general crypto knowledge. Keep the response to 2-3 sentences max. If the question is political or controversial, state you are an AI focused on Aerocoin.";
            
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const maxRetries = 3;
            let response = null;
            let lastError = null;

            for (let attempt = 0; attempt < maxRetries; attempt++) {
                try {
                    response = await fetch(GEMINI_API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                        return text || (window.currentLanguage === 'es' ? "Lo siento, no pude generar una respuesta." : "Sorry, I couldn't generate a response.");
                    } else {
                        throw new Error(`API returned status ${response.status}`);
                    }
                } catch (error) {
                    lastError = error;
                    if (attempt < maxRetries - 1) {
                        await new Promise(resolve => setTimeout(resolve, Math.pow(2, attempt) * 1000));
                    }
                }
            }
            console.error("Gemini API failed after multiple retries:", lastError);
            return window.currentLanguage === 'es' ? "El servicio de IA no est谩 disponible temporalmente." : "AI service is temporarily unavailable.";
        }

        window.sendMessage = async () => {
            const inputElement = document.getElementById('chatInput');
            const message = inputElement.value.trim();
            
            if (!message || !window.db || !window.isAuthReady) return;

            const sendButton = document.getElementById('chatSendButton');
            sendButton.disabled = true;
            const originalButtonText = translations[window.currentLanguage].chat_send_btn;
            sendButton.textContent = window.currentLanguage === 'es' ? 'Enviando...' : 'Sending...';

            try {
                const chatRef = collection(window.db, CHAT_COLLECTION);
                
                // 1. Save user message
                await addDoc(chatRef, {
                    message: message,
                    senderId: currentUser ? currentUser.uid : 'anonymous',
                    timestamp: Timestamp.now(),
                    isSystem: false,
                });
                
                // 2. Check for question and get AI response
                if (message.includes('?') || message.toLowerCase().startsWith('what') || message.toLowerCase().startsWith('c贸mo') || message.toLowerCase().startsWith('qu茅')) {
                    const aiResponse = await getGeminiResponse(message);
                    
                    // 3. Save AI response as system message
                    await addDoc(chatRef, {
                        message: aiResponse,
                        senderId: 'AI',
                        timestamp: Timestamp.now(),
                        isSystem: true,
                    });
                }
                
                inputElement.value = '';
            } catch (e) {
                console.error("Error handling chat message: ", e);
            } finally {
                sendButton.disabled = false;
                sendButton.textContent = originalButtonText;
                inputElement.focus();
                window.setLanguage(window.currentLanguage);
            }
        };

        window.analyzeMarketSentiment = async () => {
            const analysisContainer = document.getElementById('sentimentAnalysisResult');
            const analyzeButton = document.getElementById('analyzeButton');

            analysisContainer.innerHTML = `<p class="text-gray-500 text-center" data-localize="loading_sentiment"></p>`;
            analysisContainer.classList.remove('hidden');

            analyzeButton.disabled = true;
            const originalButtonText = analyzeButton.textContent;
            analyzeButton.textContent = translations[window.currentLanguage].loading_sentiment;

            try {
                const systemPrompt = "You are a specialized crypto market analyst. Your task is to provide a very brief, single-paragraph summary (2-3 sentences max) on the current market sentiment (bullish, bearish, or neutral) specifically concerning deflationary micro-cap tokens on the Binance Smart Chain (BSC). Focus on trends relevant to scarcity and token burns. Output only the summary text.";
                
                const userQuery = "Summarize the current market outlook for deflationary BSC tokens, referencing any relevant news or trends.";
                const apiKey = GEMINI_API_KEY;
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                const maxRetries = 3;
                let response = null;
                let result = null;

                for (let attempt = 0; attempt < maxRetries; attempt++) {
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        
                        if (response.ok) {
                            result = await response.json();
                            break;
                        } else {
                            throw new Error(`API returned status ${response.status}`);
                        }
                    } catch (error) {
                        if (attempt < maxRetries - 1) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, attempt) * 1000));
                        } else {
                            throw error;
                        }
                    }
                }
                
                const candidate = result.candidates?.[0];
                const text = candidate?.content?.parts?.[0]?.text || translations[window.currentLanguage].chat_error;
                
                let sources = [];
                const groundingMetadata = candidate?.groundingMetadata;
                if (groundingMetadata?.groundingAttributions) {
                    sources = groundingMetadata.groundingAttributions
                        .map(attribution => ({
                            uri: attribution.web?.uri,
                            title: attribution.web?.title,
                        }))
                        .filter(source => source.uri && source.title);
                }

                let htmlContent = `<p class="text-aero-light mb-4 text-justify">${text}</p>`;
                
                if (sources.length > 0) {
                    htmlContent += `<p class="text-sm font-semibold text-aero-blue mt-4" data-localize="sentiment_sources"></p>`;
                    htmlContent += `<ul class="list-disc list-inside text-xs text-gray-500 space-y-1">`;
                    sources.forEach((source, index) => {
                        htmlContent += `<li><a href="${source.uri}" target="_blank" rel="noopener noreferrer" class="hover:underline">${source.title}</a></li>`;
                    });
                    htmlContent += `</ul>`;
                }

                analysisContainer.innerHTML = htmlContent;

            } catch (e) {
                console.error("Gemini API error during market analysis:", e);
                analysisContainer.innerHTML = `<p class="text-red-500">${translations[window.currentLanguage].chat_error}</p>`;
            } finally {
                analyzeButton.disabled = false;
                analyzeButton.textContent = originalButtonText;
                window.setLanguage(window.currentLanguage);
            }
        }

        // --- Init ---
        initializeFirebase();

        // --- Airdrop Claim Logic con autenticaci贸n ---
        window.claimAirdrop = async () => {
            // Verificar autenticaci贸n
            if (!currentUser) {
                showAuthModal();
                showMessage('authError', translations[window.currentLanguage].auth_required_airdrop, 'error');
                return;
            }

            const inputElement = document.getElementById('bscAddressInput');
            const address = inputElement.value.trim();
            const messageElement = document.getElementById('airdropMessage');
            const airdropButton = document.getElementById('airdropButton');
            
            messageElement.classList.add('hidden');
            messageElement.textContent = '';
            
            const bscRegex = /^0x[a-fA-F0-9]{40}$/;
            if (!bscRegex.test(address)) {
                messageElement.textContent = translations[window.currentLanguage].airdrop_invalid;
                messageElement.classList.remove('hidden', 'text-green-500');
                messageElement.classList.add('text-red-500');
                return;
            }

            airdropButton.disabled = true;
            const originalButtonText = airdropButton.textContent;
            airdropButton.textContent = window.currentLanguage === 'es' ? 'Procesando...' : 'Processing...';

            if (!window.db || !window.isAuthReady || !currentUser) {
                console.error("Firebase not ready or user not authenticated.");
                messageElement.textContent = translations[window.currentLanguage].airdrop_error.replace('{amount}', window.nextAirdropAmount || 1);
                messageElement.classList.remove('hidden');
                messageElement.classList.add('text-red-500');
                airdropButton.disabled = false;
                airdropButton.textContent = originalButtonText;
                return;
            }

            try {
                const airdropsRef = collection(window.db, AIRDROPS_COLLECTION);

                // Verificar si el usuario ya reclam贸 (por userId)
                const userAirdropsQuery = query(airdropsRef, where("userId", "==", currentUser.uid));
                const userAirdropsSnapshot = await getDocs(userAirdropsQuery);

                if (!userAirdropsSnapshot.empty) {
                    messageElement.textContent = translations[window.currentLanguage].airdrop_user_limit;
                    messageElement.classList.remove('hidden', 'text-green-500');
                    messageElement.classList.add('text-yellow-500');
                } else {
                    // Verificar si la direcci贸n ya fue usada
                    const addressQuery = query(airdropsRef, where("address", "==", address));
                    const addressSnapshot = await getDocs(addressQuery);

                    if (!addressSnapshot.empty) {
                        messageElement.textContent = translations[window.currentLanguage].airdrop_duplicate;
                        messageElement.classList.remove('hidden', 'text-green-500');
                        messageElement.classList.add('text-yellow-500');
                    } else {
                        const airdropAmount = window.nextAirdropAmount || 1;

                        // Registrar airdrop con userId
                        await addDoc(airdropsRef, {
                            address: address,
                            userId: currentUser.uid,
                            userEmail: currentUser.email,
                            userName: window.userProfile?.displayName || currentUser.displayName,
                            claimedAt: Timestamp.now(),
                            amount: airdropAmount,
                            type: 'airdrop'
                        });
                        
                        // Actualizar perfil de usuario
                        if (window.userProfile) {
                            const userRef = doc(window.db, USERS_COLLECTION, currentUser.uid);
                            await updateDoc(userRef, {
                                totalAirdropsClaimed: (window.userProfile.totalAirdropsClaimed || 0) + 1,
                                address: address,
                                lastAirdropClaim: Timestamp.now()
                            });
                            window.userProfile.totalAirdropsClaimed = (window.userProfile.totalAirdropsClaimed || 0) + 1;
                        }
                        
                        messageElement.textContent = translations[window.currentLanguage].airdrop_success.replace('{amount}', airdropAmount);
                        messageElement.classList.remove('hidden', 'text-red-500', 'text-yellow-500');
                        messageElement.classList.add('text-green-500');
                        
                        inputElement.value = '';
                        
                        // Actualizar cantidad para pr贸ximo airdrop
                        window.nextAirdropAmount = airdropAmount + 1;
                        
                        // Actualizar estad铆sticas
                        await updateAppStats();
                        
                        // Actualizar UI inmediatamente
                        updateAirdropsUI([]);
                        
                        // Notificar en chat
                        const chatRef = collection(window.db, CHAT_COLLECTION);
                        await addDoc(chatRef, {
                            message: ` 隆NUEVO AIRDROP! ${window.userProfile?.displayName || currentUser.email} recibi贸 ${airdropAmount} AERO`,
                            senderId: 'System',
                            timestamp: Timestamp.now(),
                            isSystem: true,
                        });
                    }
                }

            } catch (e) {
                console.error("Error claiming airdrop: ", e);
                messageElement.textContent = translations[window.currentLanguage].airdrop_error.replace('{amount}', window.nextAirdropAmount || 1);
                messageElement.classList.remove('hidden', 'text-green-500');
                messageElement.classList.add('text-red-500');
            } finally {
                airdropButton.disabled = false;
                if (!airdropButton.textContent.includes('AERO')) {
                    airdropButton.textContent = translations[window.currentLanguage].btn_airdrop.replace('{amount}', window.nextAirdropAmount || 1);
                }
                window.setLanguage(window.currentLanguage);
            }
        };

        // --- BURN VOTING LOGIC con autenticaci贸n ---
        window.voteForBurnDate = async () => {
            // Verificar autenticaci贸n
            if (!currentUser) {
                showAuthModal();
                showMessage('authError', translations[window.currentLanguage].auth_required_vote, 'error');
                return;
            }

            const inputElement = document.getElementById('burnDateInput');
            const dateValue = inputElement.value.trim();
            const messageElement = document.getElementById('voteMessage');
            const voteButton = document.getElementById('voteButton');

            messageElement.classList.add('hidden');
            messageElement.textContent = '';
            
            if (!dateValue) {
                messageElement.textContent = translations[window.currentLanguage].vote_invalid_date;
                messageElement.classList.remove('hidden');
                messageElement.classList.add('text-red-500');
                return;
            }

            // Check if date is in the NEXT month
            const dateObj = new Date(dateValue + 'T00:00:00Z');
            const today = new Date();
            const nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
            
            if (dateObj.getUTCMonth() !== nextMonth.getUTCMonth() || dateObj.getUTCFullYear() !== nextMonth.getUTCFullYear()) {
                 messageElement.textContent = translations[window.currentLanguage].vote_invalid_month;
                 messageElement.classList.remove('hidden');
                 messageElement.classList.add('text-red-500');
                 return;
            }
            
            voteButton.disabled = true;
            voteButton.textContent = window.currentLanguage === 'es' ? 'Votando...' : 'Voting...';

            if (!window.db || !window.isAuthReady || !currentUser) {
                console.error("Firebase not ready or User not authenticated.");
                messageElement.textContent = translations[window.currentLanguage].vote_auth_required;
                messageElement.classList.remove('hidden', 'text-green-500');
                messageElement.classList.add('text-red-500');
                voteButton.disabled = false;
                voteButton.textContent = translations[window.currentLanguage].btn_vote;
                return;
            }

            try {
                // Usar userId como Document ID para garantizar 1 voto por usuario
                const voteDocRef = doc(window.db, VOTES_COLLECTION, currentUser.uid);
                
                await setDoc(voteDocRef, {
                    date: dateValue,
                    userId: currentUser.uid,
                    userEmail: currentUser.email,
                    userName: window.userProfile?.displayName || currentUser.displayName,
                    votedAt: Timestamp.now(),
                });
                
                // Actualizar perfil de usuario
                if (window.userProfile) {
                    const userRef = doc(window.db, USERS_COLLECTION, currentUser.uid);
                    await updateDoc(userRef, {
                        totalVotesCast: (window.userProfile.totalVotesCast || 0) + 1,
                        lastVote: Timestamp.now()
                    });
                    window.userProfile.totalVotesCast = (window.userProfile.totalVotesCast || 0) + 1;
                }
                
                messageElement.textContent = translations[window.currentLanguage].vote_success;
                messageElement.classList.remove('hidden', 'text-red-500');
                messageElement.classList.add('text-green-500');
                inputElement.value = '';

            } catch (e) {
                console.error("Error submitting vote: ", e);
                messageElement.textContent = translations[window.currentLanguage].vote_error;
                messageElement.classList.remove('hidden', 'text-green-500');
                messageElement.classList.add('text-red-500');
            } finally {
                voteButton.disabled = false;
                voteButton.textContent = translations[window.currentLanguage].btn_vote;
            }
        };

        // --- LGICA DE CAMBIO DE MODO ---
        window.toggleTheme = () => {
            const body = document.body;
            const isLight = body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
            window.setLanguage(window.currentLanguage);
        }

        window.applyInitialTheme = () => {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
            }
        }
        window.applyInitialTheme();

        // --- LANGUAGE DATA actualizada con textos de autenticaci贸n ---
        const translations = {
            'en': {
                'title': 'Aerocoin (AERO) - The Deflationary Scarcity on BSC',
                'nav_vision': 'Vision',
                'nav_tokenomics': 'Tokenomics',
                'nav_market': 'Market',
                'nav_airdrops': 'Airdrops',
                'voting_title': 'Burn Vote',
                'forum_title': 'Public Forum',
                'faq_title': 'FAQ',
                'hero_title': 'Aerocoin (AERO)',
                'hero_subtitle': 'Deflationary Scarcity Taking Off on the <span class="font-semibold text-aero-blue">Binance Smart Chain</span>.',
                'hero_text': 'With an ultra-limited supply of **only 800,000 AERO**, Aerocoin is not just another token. It is a statement of value driven by programmed scarcity and the creator\'s active commitment to deflation.',
                'btn_buy_aero': 'Buy AERO on PancakeSwap',
                'btn_contract': 'View Contract on BscScan',
                'btn_vision': 'Discover the Deflationary Vision',
                'countdown_title': 'Total Supply Deflationary Countdown',
                'countdown_text': 'Remaining: <span class="text-red-400 font-extrabold">{remaining} AERO</span> | {percent}% Burned (Total: {burned} AERO)',
                'burned_text': 'Burned (Total)',
                'vision_title': 'Our Advantage: Active Deflation and Genuine Scarcity',
                'card1_title': 'Ultra-Scarce Supply',
                'card1_text': 'Only **800,000 AERO** in circulation. While other tokens launch billions, Aerocoin opts for an extremely limited supply to maximize demand and exclusivity.',
                'card2_title': 'Proactive Creator Burn',
                'card2_text': 'The developer is committed to strategically and continually **burning AERO tokens**. This deflationary policy aims to protect value and create sustained upward pressure on price.',
                'card3_title': 'Solid Foundations',
                'card3_text': 'Based on advanced ERC20 standards (including Permit) and deployed on the robust Binance Smart Chain. Aerocoin is designed for security and long-term functionality.',
                'tokenomics_stat1_title_dynamic': 'Total Supply (Max: 800,000 AERO) - {burned} AERO Burned',
                'tokenomics_title': 'Essential AERO Details',
                'stat1_title': 'Total Supply (Max.)',
                'stat1_value': '800,000 AERO',
                'stat1_desc': 'Designed for scarcity.',
                'stat2_title': 'Symbol / Decimals',
                'stat2_value': 'AERO / 9',
                'stat2_desc': 'Precision in transactions.',
                'stat3_title': 'Network / Blockchain',
                'stat3_value': 'Binance Smart Chain (BSC)',
                'stat3_desc': 'Speed and low fees.',
                'stat4_title': 'Additional Functionality',
                'stat4_value': 'ERC20 + EIP-2612 Permit',
                'stat4_desc': 'Gas-less transactions for approvals (Permit).',
                'contract_title': 'Contract Address (AERO)',
                'btn_copy': 'Copy',
                'msg_copied': 'Address Copied!',
                'trust_title': 'Audit and Trust',
                'trust_text': 'Transparency is key. Verify the source code and technical details on the leading platforms.',
                'btn_bscscan_verified': 'BscScan (Verified Code)',
                'btn_binance_details': 'Binance Wallet (Token Details)',
                'market_title': 'Community and Market Data',
                'holders_title': 'AERO Holders',
                'holders_estimate': '18',
                'holders_desc': 'Click below to see the real-time count and detailed balance distribution on the blockchain.',
                'btn_view_holders': 'View Holders on BscScan',
                'burn_title': 'Deflationary Commitment',
                'burn_monthly_commit': 'Monthly Burn Commitment:',
                'holder_goal_title': 'Holder Goal (10,000 Holders)',
                'holder_goal_desc': 'Every Airdrop claim adds 1 holder towards the 10,000 goal, increasing the value proposition.',
                'airdrop_title': 'AERO Airdrop: Claim {amount} Aerocoin',
                'airdrop_desc': 'Enter your BSC address to claim **{amount} AERO** (simulation). Early participants get less, later participants get more! Each claim increases the next airdrop amount.',
                'airdrop_input_placeholder': 'Paste your BSC address (0x...)',
                'btn_airdrop': 'Claim {amount} Aerocoin',
                'airdrop_list_title': 'Recent Airdrop Claims',
                'airdrop_address_placeholder': 'No airdrops claimed yet.',
                'airdrop_success': 'Success! {amount} AERO claimed. Address recorded as holder. ',
                'airdrop_invalid': 'Invalid BSC address format.',
                'airdrop_error': 'Error processing airdrop. Check console.',
                'airdrop_duplicate': 'Address already claimed airdrop.',
                'airdrop_user_limit': 'You have already claimed your airdrop. Only one airdrop per user.',
                'auth_required_airdrop': 'Please sign in to claim airdrop.',
                'vote_input_title': 'Vote for the Monthly Burn Date',
                'vote_input_desc': 'Select a date within the **next month** (YYYY-MM-DD). Only one vote per unique user is allowed.',
                'btn_vote': 'Submit Vote',
                'vote_results_title': 'Current Voting Results (Next Burn)',
                'vote_winning_date': 'Winning Burn Date:',
                'vote_total_votes': 'Total Votes: <span id="totalVotesCount">0</span>',
                'vote_no_votes': 'No date yet.',
                'vote_no_votes_full': 'No votes cast yet for the next month.',
                'vote_success': 'Vote successfully submitted! Thank you for participating.',
                'vote_invalid_date': 'Invalid date format or missing date.',
                'vote_invalid_month': 'The date must be within the next month.',
                'vote_error': 'Error submitting vote. Check console.',
                'vote_auth_required': 'Authentication required to vote.',
                'auth_required_vote': 'Please sign in to vote.',
                'history_title': 'Burn History (Executed Burns)',
                'history_month_label': 'Burn Event for {month}',
                'history_winning_date': 'Winning Date:',
                'history_total_votes': 'Total Votes:',
                'history_burned_amount': 'Burned:',
                'history_no_data': 'No burn history found.',
                'faq_q1': 'What is the utility of Aerocoin?',
                'faq_a1': 'Aerocoin is primarily a deflationary asset designed for value preservation and speculation due to its extreme scarcity and the developer\'s burn commitment. Future utility will depend on community development and potential ecosystem integration.',
                'faq_q2': 'What is the purpose of the burn mechanism?',
                'faq_a2': 'The burn mechanism is a manual process executed by the developer to continually reduce the circulating supply. This reduction increases the scarcity of AERO, aiming to counteract selling pressure and support long-term price appreciation.',
                'faq_q3': 'Why only 800,000 total supply?',
                'faq_a3': 'The highly limited supply is the core pillar of Aerocoin\'s value proposition. Unlike inflationary tokens, AERO is positioned as a rare, high-value asset, making every unit proportionally more significant.',
                'faq_q4': 'How can I acquire AERO?',
                'faq_a4': 'AERO can be acquired through decentralized exchanges (DEXs) on the Binance Smart Chain (BSC) after its official listing. Always use the official contract address (0x19F7ac2439143E7d63a8B55AD7242036897647cA).',
                'faq_q5': 'When will all tokens be burned, and what happens then?',
                'faq_a5': 'If the monthly burn commitment of 100 AERO continues, it would take several millennia to burn all 800,000 tokens. However, the true purpose is not total destruction, but to establish a constant deflationary pressure.',
                'footer_copy': '漏 2024 Aerocoin (AERO). A scarcity project powered by the community on BSC.',
                'chat_input_placeholder': 'Type your public message here...',
                'chat_send_btn': 'Send',
                'chat_error': 'Error loading chat messages.',
                'sentiment_title': ' Market Sentiment Analysis',
                'sentiment_desc': 'Get a concise summary of the current cryptocurrency market sentiment (web-based) for deflationary tokens on BSC.',
                'btn_analyze': 'Analyze Sentiment ',
                'loading_sentiment': 'Analyzing real-time web data...',
                'sentiment_sources': 'Sources Cited:',
                
                // Nuevos textos de autenticaci贸n
                'auth_modal_title': 'Welcome to Aerocoin',
                'auth_modal_desc': 'Sign in to claim airdrops, vote on burn dates, and participate in the community.',
                'auth_btn_google': 'Continue with Google',
                'auth_btn_apple': 'Continue with Apple',
                'auth_btn_skip': 'Skip for now',
                'auth_google_error': 'Error signing in with Google.',
                'auth_apple_error': 'Error signing in with Apple.',
                'auth_logout': 'Sign Out',
                'auth_logout_success': 'Successfully signed out.',
                'auth_logout_error': 'Error signing out.',
                'auth_welcome': 'Welcome back, {name}!',
                'auth_sign_in': 'Sign In',
                'auth_user_profile': 'Profile',
                'auth_user_airdrops': 'Airdrops claimed: {count}',
                'auth_user_votes': 'Votes cast: {count}',
            },
            'es': {
                'title': 'Aerocoin (AERO) - La Escasez Deflacionaria en BSC',
                'nav_vision': 'Visi贸n',
                'nav_tokenomics': 'Tokenomics',
                'nav_market': 'Mercado',
                'nav_airdrops': 'Airdrops',
                'voting_title': 'Votaci贸n de Quema',
                'forum_title': 'Foro P煤blico',
                'faq_title': 'FAQ',
                'hero_title': 'Aerocoin (AERO)',
                'hero_subtitle': 'La Escasez Deflacionaria que Despega en la <span class="font-semibold text-aero-blue">Binance Smart Chain</span>.',
                'hero_text': 'Con un suministro ultralimitado de **solo 800,000 AERO**, Aerocoin no es un token m谩s. Es una declaraci贸n de valor impulsada por la escasez programada y el compromiso activo de su creador con la deflaci贸n.',
                'btn_buy_aero': 'Comprar AERO en PancakeSwap',
                'btn_contract': 'Ver Contrato en BscScan',
                'btn_vision': 'Descubre la Visi贸n Deflacionaria',
                'countdown_title': 'Cuenta Regresiva Deflacionaria del Suministro Total',
                'countdown_text': 'Restante: <span class="text-red-400 font-extrabold">{remaining} AERO</span> | {percent}% Quemado (Total: {burned} AERO)',
                'burned_text': 'Quemado (Total)',
                'vision_title': 'Nuestra Ventaja: Deflaci贸n Activa y Escasez Genuina',
                'card1_title': 'Suministro Ultra-Escaso',
                'card1_text': 'Solo **800,000 AERO** en circulaci贸n. Mientras otros tokens lanzan miles de millones, Aerocoin apuesta por un suministro extremadamente limitado para maximizar la demanda y la exclusividad.',
                'card2_title': 'Quema Proactiva del Creador',
                'card2_text': 'El desarrollador est谩 comprometido a **quemar tokens AERO** de forma estrat茅gica y continua. Esta pol铆tica deflacionaria tiene como objetivo proteger el valor y crear una presi贸n alcista sostenida sobre el precio.',
                'card3_title': 'Un Token con Fundamentos S贸lidos',
                'card3_text': 'Basado en est谩ndares ERC20 avanzados (incluyendo Permit) y desplegado en la robusta Binance Smart Chain. Aerocoin est谩 dise帽ado para la seguridad y la funcionalidad a largo plazo.',
                'tokenomics_stat1_title_dynamic': 'Suministro Total (M谩x: 800.000 AERO) - {burned} AERO Quemados',
                'tokenomics_title': 'Detalles Esenciales de AERO',
                'stat1_title': 'Suministro Total (M谩x.)',
                'stat1_value': '800,000 AERO',
                'stat1_desc': 'Dise帽ado para la escasez.',
                'stat2_title': 'S铆mbolo / Decimals',
                'stat2_value': 'AERO / 9',
                'stat2_desc': 'Precisi贸n en las transacciones.',
                'stat3_title': 'Red / Blockchain',
                'stat3_value': 'Binance Smart Chain (BSC)',
                'stat3_desc': 'Velocidad y bajas comisiones.',
                'stat4_title': 'Funcionalidad Adicional',
                'stat4_value': 'ERC20 + EIP-2612 Permit',
                'stat4_desc': 'Transacciones sin gas para aprobaciones (Permit).',
                'contract_title': 'Direcci贸n del Contrato (AERO)',
                'btn_copy': 'Copiar',
                'msg_copied': '隆Direcci贸n copiada!',
                'trust_title': 'Auditor铆a y Confianza',
                'trust_text': 'La transparencia es clave. Verifica el c贸digo fuente y los detalles t茅cnicos en las plataformas l铆deres.',
                'btn_bscscan_verified': 'BscScan (C贸digo Verificado)',
                'btn_binance_details': 'Binance Wallet (Detalles del Token)',
                'market_title': 'Comunidad y Datos de Mercado',
                'holders_title': 'Holders de AERO',
                'holders_estimate': '18',
                'holders_desc': 'Haz clic abajo para ver el conteo en tiempo real y la distribuci贸n detallada de balances en la blockchain.',
                'btn_view_holders': 'Ver Holders en BscScan',
                'burn_title': 'Compromiso Deflacionario',
                'burn_monthly_commit': 'Compromiso de Quema Mensual:',
                'holder_goal_title': 'Meta de Holders (10.000 Holders)',
                'holder_goal_desc': 'Cada Airdrop suma 1 holder a la meta de 10.000, aumentando la propuesta de valor.',
                'airdrop_title': 'AERO Airdrop: Reclama {amount} Aerocoin',
                'airdrop_desc': 'Introduce tu direcci贸n de BSC para reclamar **{amount} AERO** (simulaci贸n). 隆Los primeros participantes reciben menos, los que llegan despu茅s reciben m谩s! Cada reclamo aumenta la cantidad del pr贸ximo airdrop.',
                'airdrop_input_placeholder': 'Pega tu direcci贸n de BSC (0x...)',
                'btn_airdrop': 'Reclamar {amount} Aerocoin',
                'airdrop_list_title': 'Airdrops Reclamados Recientemente',
                'airdrop_address_placeholder': 'A煤n no hay airdrops reclamados.',
                'airdrop_success': '隆xito! {amount} AERO reclamados. Direcci贸n registrada como holder. ',
                'airdrop_invalid': 'Formato de direcci贸n de BSC inv谩lido.',
                'airdrop_error': 'Error al procesar el airdrop. Revisa la consola.',
                'airdrop_duplicate': 'Esta direcci贸n ya reclam贸 un airdrop.',
                'airdrop_user_limit': 'Ya has reclamado tu airdrop. Solo un airdrop por usuario.',
                'auth_required_airdrop': 'Por favor, inicia sesi贸n para reclamar airdrop.',
                'vote_input_title': 'Vota por la Fecha de Quema Mensual',
                'vote_input_desc': 'Selecciona una fecha dentro del **pr贸ximo mes** (AAAA-MM-DD). Solo se permite un voto por usuario 煤nico.',
                'btn_vote': 'Enviar Voto',
                'vote_results_title': 'Resultados de la Votaci贸n (Pr贸xima Quema)',
                'vote_winning_date': 'Fecha de Quema Ganadora:',
                'vote_total_votes': 'Votos Totales: <span id="totalVotesCount">0</span>',
                'vote_no_votes': 'A煤n no hay fecha.',
                'vote_no_votes_full': 'A煤n no hay votos registrados para el pr贸ximo mes.',
                'vote_success': '隆Voto enviado con 茅xito! Gracias por participar.',
                'vote_invalid_date': 'Formato de fecha inv谩lido o fecha faltante.',
                'vote_invalid_month': 'La fecha debe estar dentro del pr贸ximo mes.',
                'vote_error': 'Error al enviar el voto. Revisa la consola.',
                'vote_auth_required': 'Se requiere autenticaci贸n para votar.',
                'auth_required_vote': 'Por favor, inicia sesi贸n para votar.',
                'history_title': 'Historial de Quema (Quemas Ejecutadas)',
                'history_month_label': 'Evento de Quema de {month}',
                'history_winning_date': 'Fecha Ganadora:',
                'history_total_votes': 'Votos Totales:',
                'history_burned_amount': 'Quemado:',
                'history_no_data': 'No se encontr贸 historial de quema.',
                'faq_q1': '驴Cu谩l es la utilidad de Aerocoin?',
                'faq_a1': 'Aerocoin es principalmente un activo deflacionario dise帽ado para la preservaci贸n de valor y la especulaci贸n debido a su escasez extrema y el compromiso de quema del desarrollador. La utilidad futura depender谩 del desarrollo comunitario y la potencial integraci贸n en el ecosistema.',
                'faq_q2': '驴Cu谩l es el prop贸sito del mecanismo de quema?',
                'faq_a2': 'El mecanismo de quema es un proceso manual ejecutado por el desarrollador para reducir continuamente el suministro circulante. Esta reducci贸n aumenta la escasez de AERO, buscando contrarrestar la presi贸n de venta y apoyar la apreciaci贸n del precio a largo plazo.',
                'faq_q3': '驴Por qu茅 solo 800.000 de suministro total?',
                'faq_a3': 'El suministro altamente limitado es el pilar central de la propuesta de valor de Aerocoin. A diferencia de los tokens inflacionarios, AERO se posiciona como un activo raro y de alto valor, haciendo que cada unidad sea proporcionalmente m谩s significativa.',
                'faq_q4': '驴C贸mo puedo adquirir AERO?',
                'faq_a4': 'AERO se puede adquirir a trav茅s de intercambios descentralizados (DEX) en la Binance Smart Chain (BSC) despu茅s de su listado oficial. Utiliza siempre la direcci贸n de contrato oficial (0x19F7ac2439143E7d63a8B55AD7242036897647cA).',
                'faq_q5': '驴Cu谩ndo se queman todos los tokens y qu茅 pasa llegado al caso?',
                'faq_a5': 'Si el compromiso de quema mensual de 100 AERO contin煤a, se tardar铆an varios milenios en quemar los 800.000 tokens. Sin embargo, el verdadero prop贸sito no es la destrucci贸n total, sino establecer una presi贸n deflacionaria constante.',
                'footer_copy': '漏 2024 Aerocoin (AERO). Un proyecto de escasez impulsado por la comunidad en BSC.',
                'chat_input_placeholder': 'Escribe tu mensaje p煤blico aqu铆...',
                'chat_send_btn': 'Enviar',
                'chat_error': 'Error al cargar mensajes del chat.',
                'sentiment_title': ' An谩lisis de Sentimiento del Mercado',
                'sentiment_desc': 'Obt茅n un resumen conciso del sentimiento actual del mercado de criptomonedas (basado en la web) para tokens deflacionarios en BSC.',
                'btn_analyze': 'Analizar Sentimiento ',
                'loading_sentiment': 'Analizando datos web en tiempo real...',
                'sentiment_sources': 'Fuentes Citadas:',
                
                // Nuevos textos de autenticaci贸n en espa帽ol
                'auth_modal_title': 'Bienvenido a Aerocoin',
                'auth_modal_desc': 'Inicia sesi贸n para reclamar airdrops, votar fechas de quema y participar en la comunidad.',
                'auth_btn_google': 'Continuar con Google',
                'auth_btn_apple': 'Continuar con Apple',
                'auth_btn_skip': 'Saltar por ahora',
                'auth_google_error': 'Error al iniciar sesi贸n con Google.',
                'auth_apple_error': 'Error al iniciar sesi贸n con Apple.',
                'auth_logout': 'Cerrar Sesi贸n',
                'auth_logout_success': 'Sesi贸n cerrada correctamente.',
                'auth_logout_error': 'Error al cerrar sesi贸n.',
                'auth_welcome': '隆Bienvenido de nuevo, {name}!',
                'auth_sign_in': 'Iniciar Sesi贸n',
                'auth_user_profile': 'Perfil',
                'auth_user_airdrops': 'Airdrops reclamados: {count}',
                'auth_user_votes': 'Votos emitidos: {count}',
            }
        };

        window.currentLanguage = 'en';
        window.translations = translations;

        // --- LANGUAGE SWITCHING LOGIC ---
        window.setLanguage = (lang) => {
            if (!translations[lang]) return;
            window.currentLanguage = lang;
            
            const titleElement = document.querySelector('title');
            if (titleElement) {
                titleElement.textContent = translations[lang]['title'];
            }

            document.querySelectorAll('[data-localize]').forEach(element => {
                const key = element.getAttribute('data-localize');
                if (translations[lang][key]) {
                    let localizedContent = translations[lang][key];
                    
                    if (key === 'countdown_text') {
                        localizedContent = localizedContent
                            .replace('{remaining}', window.remainingTokens)
                            .replace('{percent}', window.progressPercent)
                            .replace('{burned}', window.burnedTokens);
                    }

                    if (key === 'tokenomics_stat1_title_dynamic') {
                        localizedContent = localizedContent.replace('{burned}', window.burnedTokens);
                        element.innerHTML = localizedContent;
                        return;
                    }
                    
                    // Reemplazar variables en textos de usuario
                    if (key === 'auth_welcome' && window.userProfile) {
                        localizedContent = localizedContent.replace('{name}', window.userProfile.displayName || 'Usuario');
                    }
                    
                    if (key === 'auth_user_airdrops' && window.userProfile) {
                        localizedContent = localizedContent.replace('{count}', window.userProfile.totalAirdropsClaimed || 0);
                    }
                    
                    if (key === 'auth_user_votes' && window.userProfile) {
                        localizedContent = localizedContent.replace('{count}', window.userProfile.totalVotesCast || 0);
                    }
                    
                    element.innerHTML = localizedContent;
                }
            });

            document.querySelectorAll('[data-localize-placeholder]').forEach(element => {
                const key = element.getAttribute('data-localize-placeholder');
                if (translations[lang][key]) {
                    element.setAttribute('placeholder', translations[lang][key]);
                }
            });
            
            // Update airdrop button
            const airdropButton = document.getElementById('airdropButton');
            const amount = window.nextAirdropAmount || 1;
            if (airdropButton) {
                airdropButton.textContent = translations[lang].btn_airdrop.replace('{amount}', amount);
            }
            
            // Update airdrop title and description
            const airdropTitleElement = document.getElementById('airdropTitle');
            const airdropDescElement = document.getElementById('airdropDesc');
            if (airdropTitleElement) {
                airdropTitleElement.innerHTML = translations[lang].airdrop_title.replace('{amount}', amount);
            }
            if (airdropDescElement) {
                airdropDescElement.innerHTML = translations[lang].airdrop_desc.replace('{amount}', amount);
            }
        };

        // Initialize language on load
        window.addEventListener('load', () => {
            document.getElementById('holdersCount').textContent = INITIAL_HOLDER_COUNT.toLocaleString();
            window.setLanguage(window.currentLanguage);
            updateThemeIcon();
        });
        
        // --- COPY CONTRACT FUNCTIONALITY ---
        window.copyContract = () => {
            const address = document.getElementById('contractAddress').textContent.trim();
            const copyMessage = document.getElementById('copyMessage');
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(address).then(() => {
                    copyMessage.textContent = translations[window.currentLanguage].msg_copied;
                    copyMessage.classList.remove('hidden', 'text-red-500');
                    copyMessage.classList.add('text-green-500');
                    setTimeout(() => copyMessage.classList.add('hidden'), 2000);
                }).catch(err => {
                    console.error('Error copying:', err);
                    const textarea = document.createElement('textarea');
                    textarea.value = address;
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        document.execCommand('copy');
                        copyMessage.textContent = translations[window.currentLanguage].msg_copied;
                        copyMessage.classList.remove('hidden', 'text-red-500');
                        copyMessage.classList.add('text-green-500');
                        setTimeout(() => copyMessage.classList.add('hidden'), 2000);
                    } catch (err2) {
                        copyMessage.textContent = window.currentLanguage === 'es' ? 'Error al copiar.' : 'Error copying.';
                        copyMessage.classList.remove('hidden', 'text-green-500');
                        copyMessage.classList.add('text-red-500');
                        setTimeout(() => copyMessage.classList.add('hidden'), 3000);
                    }
                    document.body.removeChild(textarea);
                });
            } else {
                 const textarea = document.createElement('textarea');
                 textarea.value = address;
                 document.body.appendChild(textarea);
                 textarea.select();
                 try {
                     document.execCommand('copy');
                     copyMessage.textContent = translations[window.currentLanguage].msg_copied;
                     copyMessage.classList.remove('hidden', 'text-red-500');
                     copyMessage.classList.add('text-green-500');
                     setTimeout(() => copyMessage.classList.add('hidden'), 2000);
                 } catch (err) {
                     copyMessage.textContent = window.currentLanguage === 'es' ? 'Error al copiar.' : 'Error copying.';
                     copyMessage.classList.remove('hidden', 'text-green-500');
                     copyMessage.classList.add('text-red-500');
                     setTimeout(() => copyMessage.classList.add('hidden'), 3000);
                 }
                 document.body.removeChild(textarea);
            }
        }

        // --- Theme Icon Update ---
        function updateThemeIcon() {
            const body = document.body;
            const sun = document.querySelector('.dark-mode-icon');
            const moon = document.querySelector('.light-mode-icon');
            const isLightMode = body.classList.contains('light-mode');
            
            if (sun) sun.classList.toggle('hidden', !isLightMode);
            if (moon) moon.classList.toggle('hidden', isLightMode);
        }
        
        // Wrap functions to ensure theme icon updates
        const originalSetLanguage = window.setLanguage;
        window.setLanguage = function(lang) {
            originalSetLanguage(lang);
            updateThemeIcon();
            updateAuthUI();
        };
        
        const originalToggleTheme = window.toggleTheme;
        window.toggleTheme = function() {
            originalToggleTheme();
            updateThemeIcon();
        };

    </script>
</head>
<body class="bg-gray-900 text-aero-light font-sans">

    <!-- Modal de Autenticaci贸n -->
    <div id="authModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-aero-blue" data-localize="auth_modal_title">Welcome to Aerocoin</h3>
                <button onclick="closeAuthModal()" class="text-gray-500 hover:text-white text-2xl">&times;</button>
            </div>
            
            <p class="text-gray-500 mb-8" data-localize="auth_modal_desc">
                Sign in to claim airdrops, vote on burn dates, and participate in the community.
            </p>
            
            <div class="space-y-4">
                <button onclick="signInWithGoogle()" class="auth-btn auth-btn-google">
                    <svg class="w-5 h-5" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    <span data-localize="auth_btn_google">Continue with Google</span>
                </button>
                
                <button onclick="signInWithApple()" class="auth-btn auth-btn-apple">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M14.94 5.19A4.38 4.38 0 0 0 16 2a4.44 4.44 0 0 0-3 1.52 4.17 4.17 0 0 0-1 3.09 3.69 3.69 0 0 0 2.94-1.42zm2.52 7.44a4.51 4.51 0 0 1 2.16-3.81 4.66 4.66 0 0 0-3.66-2c-1.56-.16-3 .91-3.83.91s-2-.89-3.3-.87a4.92 4.92 0 0 0-4.14 2.53C2.93 12.45 4.24 17 6 19.47c.8 1.21 1.8 2.58 3.12 2.53s1.75-.76 3.28-.76 2 .76 3.3.73 2.22-1.24 3.06-2.45a11 11 0 0 0 1.38-2.85 4.41 4.41 0 0 1-2.68-4.04z"/>
                    </svg>
                    <span data-localize="auth_btn_apple">Continue with Apple</span>
                </button>
                
                <button onclick="closeAuthModal()" class="auth-btn btn-secondary">
                    <span data-localize="auth_btn_skip">Skip for now</span>
                </button>
            </div>
            
            <p id="authError" class="mt-4 text-center text-red-500 hidden"></p>
            <p id="authSuccess" class="mt-4 text-center text-green-500 hidden"></p>
            
            <p class="text-xs text-gray-500 mt-8 text-center">
                By signing in, you agree to our Terms of Service and Privacy Policy.
            </p>
        </div>
    </div>

    <!-- Navbar -->
    <header class="p-4 border-b border-aero-blue/20 shadow-lg" style="background-color: var(--nav-bg);">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-aero-blue">AERO<span class="text-aero-light">COIN</span></h1>
            
            <nav class="flex items-center space-x-4">
                <a href="#vision" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors mr-4" data-localize="nav_vision">Vision</a>
                <a href="#tokenomics" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors" data-localize="nav_tokenomics">Tokenomics</a>
                <a href="#market" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors ml-4" data-localize="nav_market">Market</a>
                <a href="#airdrops" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors ml-4" data-localize="nav_airdrops">Airdrops</a>
                <a href="#voting" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors ml-4" data-localize="voting_title">Burn Vote</a>
                <a href="#forum" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors ml-4" data-localize="forum_title">Public Forum</a>
                <a href="#faq" class="hidden sm:inline text-sm md:text-base text-gray-300 hover:text-aero-blue transition-colors ml-4" data-localize="faq_title">FAQ</a>

                <!-- Info del usuario autenticado -->
                <div id="userInfo" class="hidden">
                    <div class="flex items-center space-x-3">
                        <div class="user-info">
                            <img id="userAvatar" src="" alt="Avatar" class="user-avatar hidden">
                            <div class="flex flex-col">
                                <span id="userName" class="text-sm font-medium text-aero-light"></span>
                                <div class="flex space-x-2 text-xs text-gray-500">
                                    <span id="userAirdropsCount" data-localize="auth_user_airdrops"></span>
                                    <span></span>
                                    <span id="userVotesCount" data-localize="auth_user_votes"></span>
                                </div>
                            </div>
                        </div>
                        <button onclick="signOutUser()" class="text-xs bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg transition">
                            <span data-localize="auth_logout">Sign Out</span>
                        </button>
                    </div>
                </div>

                <!-- Bot贸n de autenticaci贸n -->
                <button id="authButton" onclick="showAuthModal()" class="bg-aero-blue hover:bg-aero-blue/80 text-gray-900 font-bold py-2 px-4 rounded-lg transition duration-150">
                    <span data-localize="auth_sign_in">Sign In</span>
                </button>

                <!-- Language Toggles -->
                <button onclick="setLanguage('en')" class="text-2xl p-1 rounded-full hover:bg-gray-700 transition">
                    吼
                </button>
                <button onclick="setLanguage('es')" class="text-2xl p-1 rounded-full hover:bg-gray-700 transition">
                    
                </button>
                
                <!-- Theme Toggle -->
                <button onclick="toggleTheme()" class="text-2xl p-1 rounded-full hover:bg-gray-700 transition ml-4 text-aero-light" aria-label="Toggle dark/light mode">
                    <svg class="h-6 w-6 hidden dark-mode-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <svg class="h-6 w-6 light-mode-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                </button>
            </nav>
        </div>
    </header>

    <!-- Resto del c贸digo HTML permanece igual -->
    <main>
        <!-- Hero Section -->
        <section class="py-20 md:py-32 text-center shadow-inner shadow-aero-blue/10 section-bg-light">
            <div class="max-w-7xl mx-auto px-6">
                <div class="w-24 h-24 mx-auto mb-8 bg-aero-blue rounded-full flex items-center justify-center shadow-2xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-900" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </div>
                
                <h2 class="text-5xl md:text-7xl font-extrabold text-aero-blue mb-4 leading-tight">
                    Aerocoin (AERO)
                </h2>
                <p class="text-xl md:text-3xl font-light mb-8 text-aero-light" data-localize="hero_subtitle">
                    Deflationary Scarcity Taking Off on the <span class="font-semibold text-aero-blue">Binance Smart Chain</span>.
                </p>
                <p class="max-w-3xl mx-auto text-gray-500 text-lg mb-10" data-localize="hero_text">
                    With an ultra-limited supply of **only 800,000 AERO**, Aerocoin is not just another token. It is a statement of value driven by programmed scarcity and the creator's active commitment to deflation.
                </p>

                <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="https://pancakeswap.finance/swap?outputCurrency=0x19F7ac2439143E7d63a8B55AD7242036897647cA&chain=bsc" target="_blank" rel="noopener noreferrer" class="bg-green-500 text-gray-900 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-green-400 transition transform hover:scale-105">
                        Buy AERO on PancakeSwap
                    </a>
                    
                    <a href="https://bscscan.com/token/0x19F7ac2439143E7d63a8B55AD7242036897647cA" target="_blank" rel="noopener noreferrer" class="bg-aero-blue text-gray-900 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-aero-blue/80 transition transform hover:scale-105" data-localize="btn_contract">
                        View Contract on BscScan
                    </a>
                    <a href="#vision" class="btn-secondary font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-gray-600 transition transform hover:scale-105" data-localize="btn_vision">
                        Discover the Deflationary Vision
                    </a>
                </div>
            </div>
        </section>
        
        <!-- Total Supply Countdown Bar -->
        <section class="py-12 section-bg-light border-t border-b border-aero-blue/20">
            <div class="max-w-5xl mx-auto px-6">
                <h3 class="text-3xl font-bold text-center text-red-500 mb-6" data-localize="countdown_title">Total Supply Deflationary Countdown</h3>
                
                <div class="card-bg p-6 rounded-xl shadow-xl border border-gray-700">
                    <p id="countdownDisplay" class="text-xl font-semibold mb-2 text-aero-light" data-localize="countdown_text">
                        Remaining: <span class="text-red-400 font-extrabold">{remaining} AERO</span> | {percent}% Burned (Total: {burned} AERO)
                    </p>
                    
                    <div class="w-full bg-gray-700 rounded-full h-4 relative">
                        <div id="countdownProgressBar" class="bg-red-600 h-4 rounded-full transition-all duration-1000" style="width: 0%"></div>
                        <span id="countdownProgressText" class="absolute inset-0 flex items-center justify-center text-xs font-bold text-white text-shadow-md">
                            0.0000% Burned
                        </span>
                    </div>
                    <p class="text-xs text-gray-500 mt-2 text-center" data-localize="stat1_desc">Total supply is 800,000 AERO. Burned amount is accumulated from historical burn votes.</p>
                </div>
            </div>
        </section>

        <!-- Deflationary Vision Section -->
        <section id="vision" class="py-20 section-bg-dark">
            <div class="max-w-6xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-blue mb-12" data-localize="vision_title">Our Advantage: Active Deflation and Genuine Scarcity</h3>

                <div class="grid md:grid-cols-3 gap-10">
                    <!-- Card 1 -->
                    <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 card-border-primary transform hover:scale-[1.02] transition duration-300 border">
                        <div class="text-4xl text-aero-blue mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8v8m0-8H9m3 0h3m-3 8h-3m3 0h3" />
                            </svg>
                        </div>
                        <h4 class="text-2xl font-semibold text-aero-light mb-4" data-localize="card1_title">Ultra-Scarce Supply</h4>
                        <p class="text-gray-500" data-localize="card1_text">
                            Only **800,000 AERO** in circulation. While other tokens launch billions, Aerocoin opts for an extremely limited supply to maximize demand and exclusivity.
                        </p>
                    </div>

                    <!-- Card 2 -->
                    <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 card-border-primary transform hover:scale-[1.02] transition duration-300 border">
                        <div class="text-4xl text-aero-blue mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c-2 3-4 4.5-4 4.5S2 16 2 20h20c0-4-3-5.5-3-5.5s-2-1.5-4-4.5c2-1 2.657-3.343 2.657-3.343A8 8 0 0117.657 18.657z" />
                            </svg>
                        </div>
                        <h4 class="text-2xl font-semibold text-aero-light mb-4" data-localize="card2_title">Proactive Creator Burn</h4>
                        <p class="text-gray-500" data-localize="card2_text">
                            The developer is committed to strategically and continually **burning AERO tokens**. This deflationary policy aims to protect value and create sustained upward pressure on price.
                        </p>
                    </div>

                    <!-- Card 3 -->
                    <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 card-border-primary transform hover:scale-[1.02] transition duration-300 border">
                        <div class="text-4xl text-aero-blue mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <h4 class="text-2xl font-semibold text-aero-light mb-4" data-localize="card3_title">Solid Foundations</h4>
                        <p class="text-gray-500" data-localize="card3_text">
                            Based on advanced ERC20 standards (including Permit) and deployed on the robust Binance Smart Chain. Aerocoin is designed for security and long-term functionality.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tokenomics & Contract Details Section -->
        <section id="tokenomics" class="py-20 section-bg-light">
            <div class="max-w-5xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-light mb-12" data-localize="tokenomics_title">Essential AERO Details</h3>
                
                <div class="card-bg p-8 rounded-xl shadow-2xl space-y-6 border">
                    <!-- Key Stats Grid -->
                    <div class="grid sm:grid-cols-2 gap-6 text-lg">
                        <div class="p-4 bg-gray-700/50 rounded-lg shadow-inner">
                            <p class="text-aero-blue font-bold" data-localize="tokenomics_stat1_title_dynamic">Total Supply (Max: 800,000 AERO) - {burned} AERO Burned</p>
                            <p class="text-aero-light font-mono" data-localize="stat1_value">800,000 AERO</p>
                            <p class="text-xs text-gray-500" data-localize="stat1_desc">Designed for scarcity.</p>
                        </div>
                        <div class="p-4 bg-gray-700/50 rounded-lg shadow-inner">
                            <p class="text-aero-blue font-bold" data-localize="stat2_title">Symbol / Decimals</p>
                            <p class="text-aero-light font-mono" data-localize="stat2_value">AERO / 9</p>
                            <p class="text-xs text-gray-500" data-localize="stat2_desc">Precision in transactions.</p>
                        </div>
                        <div class="p-4 bg-gray-700/50 rounded-lg shadow-inner">
                            <p class="text-aero-blue font-bold" data-localize="stat3_title">Network / Blockchain</p>
                            <p class="text-aero-light font-mono" data-localize="stat3_value">Binance Smart Chain (BSC)</p>
                            <p class="text-xs text-gray-500" data-localize="stat3_desc">Speed and low fees.</p>
                        </div>
                        <div class="p-4 bg-gray-700/50 rounded-lg shadow-inner">
                            <p class="text-aero-blue font-bold" data-localize="stat4_title">Additional Functionality</p>
                            <p class="text-aero-light font-mono" data-localize="stat4_value">ERC20 + EIP-2612 Permit</p>
                            <p class="text-xs text-gray-500" data-localize="stat4_desc">Gas-less transactions for approvals (Permit).</p>
                        </div>
                    </div>

                    <!-- Contract Address -->
                    <div class="pt-4 border-t border-gray-700/50">
                        <p class="text-aero-blue font-bold mb-2" data-localize="contract_title">Contract Address (AERO)</p>
                        <div class="flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4">
                            <p id="contractAddress" class="input-style p-3 rounded-lg text-sm font-mono flex-grow shadow-inner break-all">
                                0x19F7ac2439143E7d63a8B55AD7242036897647cA
                            </p>
                            <button onclick="copyContract()" class="bg-aero-blue text-gray-900 font-bold py-2 px-4 rounded-lg hover:opacity-80 transition duration-150 flex-shrink-0 shadow-lg hover:shadow-aero-blue/50" data-localize="btn_copy">
                                Copy
                            </button>
                        </div>
                        <p id="copyMessage" class="text-sm text-green-500 mt-2 hidden" data-localize="msg_copied">Address Copied!</p>
                    </div>
                </div>

                <!-- Trust Section -->
                <div class="mt-16 text-center">
                    <h4 class="text-2xl font-semibold text-aero-light mb-6" data-localize="trust_title">Audit and Trust</h4>
                    <p class="text-gray-500 mb-6" data-localize="trust_text">
                        Transparency is key. Verify the source code and technical details on the leading platforms.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                        <a href="https://bscscan.com/token/0x19F7ac2439143E7d63a8B55AD7242036897647cA#readContract" target="_blank" rel="noopener noreferrer" class="bg-gray-700/50 text-aero-light py-3 px-6 rounded-xl border border-gray-600 hover:border-aero-blue transition duration-300 transform hover:scale-105 shadow-md">
                            <span class="font-bold">BscScan</span> (Verified Code)
                        </a>
                        <a href="https://app.binance.com/uni-qr/web3-token-details?utm_medium=share&tokenCA=0x19f7ac2439143e7d63a8b55ad77242036897647ca&binanceChainId=56&chain=bsc" target="_blank" rel="noopener noreferrer" class="bg-gray-700/50 text-aero-light py-3 px-6 rounded-xl border border-gray-600 hover:border-aero-blue transition duration-300 transform hover:scale-105 shadow-md">
                            <span class="font-bold">Binance Wallet</span> (Token Details)
                        </a>
                    </div>
                </div>

            </div>
        </section>

        <!-- Market & Holders Section -->
        <section id="market" class="py-20 section-bg-dark">
            <div class="max-w-5xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-blue mb-12" data-localize="market_title">Community and Market Data</h3>
                
                <div class="grid md:grid-cols-2 gap-8 mb-12">
                    <!-- Card 1: Holders Count -->
                    <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 card-border-primary flex flex-col justify-between border">
                        <div>
                            <div class="text-4xl text-aero-blue mb-4 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20v-2m0 2h2m-2v-2m-2-3a4 4 0 100-8 4 4 0 000 8zM12 20h2v-2a3 3 0 00-2.356-1.857M12 20v-2m0 2h2m-2v-2m-2-3a4 4 0 100-8 4 4 0 000 8z" />
                                </svg>
                                <span class="font-semibold" data-localize="holders_title">AERO Holders</span>
                            </div>
                            <p id="holdersCount" class="text-3xl font-bold text-aero-light mb-2">18</p> 
                            <p class="text-gray-500 mb-6" data-localize="holders_desc">
                                Click below to see the real-time count and detailed balance distribution on the blockchain.
                            </p>
                        </div>
                        <a href="https://bscscan.com/token/tokenholderchart/0x19F7ac2439143E7d63a8B55AD7242036897647cA" target="_blank" rel="noopener noreferrer" class="text-center bg-aero-blue text-gray-900 font-bold py-3 px-6 rounded-lg hover:opacity-80 transition duration-150 transform hover:scale-[1.02] shadow-lg hover:shadow-aero-blue/50" data-localize="btn_view_holders">
                            View Holders on BscScan
                        </a>
                    </div>

                    <!-- Card 2: Deflationary Commitment -->
                    <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 card-border-accent flex flex-col justify-between border">
                        <div>
                            <div class="text-4xl text-red-500 mb-4 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c-2 3-4 4.5-4 4.5S2 16 2 20h20c0-4-3-5.5-3-5.5s-2-1.5-4-4.5c2-1 2.657-3.343 2.657-3.343A8 8 0 0117.657 18.657z" />
                                </svg>
                                <span class="font-semibold" data-localize="burn_title">Deflationary Commitment</span>
                            </div>

                            <p class="text-xl font-bold text-aero-light mb-2" data-localize="burn_monthly_commit">Monthly Burn Commitment:</p>
                            <p class="text-3xl font-extrabold text-red-400 mb-6">100 AERO</p>
                            
                            <p class="text-xl font-bold text-aero-light mb-2" data-localize="holder_goal_title">Holder Goal (10,000 Holders)</p>
                            <p id="holdersGoalText" class="text-aero-blue text-xl font-mono mb-2">18 / 10,000</p>
                            
                            <!-- Progress Bar -->
                            <div class="w-full bg-gray-700/50 rounded-full h-2.5 mb-4">
                                <div id="holdersProgressBar" class="bg-aero-blue h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            
                            <p class="text-gray-500 text-sm" data-localize="holder_goal_desc">
                                Every Airdrop claim adds 1 holder towards the 10,000 goal, increasing the value proposition.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Market Sentiment Analysis -->
                <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 border-aero-blue/50 border mt-12">
                    <h4 class="text-2xl font-semibold text-aero-light mb-4 text-center" data-localize="sentiment_title"> Market Sentiment Analysis</h4>
                    <p class="text-gray-500 mb-6 text-center" data-localize="sentiment_desc">Get a concise summary of the current cryptocurrency market sentiment (web-based) for deflationary tokens on BSC.</p>

                    <div id="sentimentAnalysisResult" class="p-4 input-style rounded-lg mb-4 text-sm hidden">
                        <!-- Analysis result will be displayed here -->
                    </div>

                    <button onclick="analyzeMarketSentiment()" id="analyzeButton" class="w-full bg-aero-blue text-gray-900 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-aero-blue/80 transition transform hover:scale-105" data-localize="btn_analyze">
                        Analyze Sentiment 
                    </button>
                </div>

            </div>
        </section>

        <!-- Airdrops Section -->
        <section id="airdrops" class="py-20 section-bg-light">
            <div class="max-w-5xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-light mb-12" data-localize="nav_airdrops">AERO Airdrops</h3>
                
                <div class="card-bg p-8 rounded-xl shadow-2xl border-t-4 border-aero-green/50 border airdrop-glow">
                    <h4 id="airdropTitle" class="text-2xl font-semibold text-aero-light mb-4 text-center" data-localize="airdrop_title">AERO Airdrop: Claim 1 Aerocoin</h4>
                    <p id="airdropDesc" class="text-gray-500 mb-6 text-center" data-localize="airdrop_desc">Enter your BSC address to claim **{amount} AERO** (simulation). Early participants get less, later participants get more! Each claim increases the next airdrop amount.</p>
                    
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 items-center">
                        <input type="text" id="bscAddressInput" class="flex-grow p-3 rounded-lg input-style placeholder-gray-500 border focus:border-aero-green focus:ring-1 focus:ring-aero-green shadow-inner" placeholder="Paste your BSC address (0x...)" data-localize-placeholder="airdrop_input_placeholder">
                        
                        <button onclick="claimAirdrop()" id="airdropButton" class="w-full sm:w-auto bg-aero-green text-gray-900 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-aero-green/80 transition transform hover:scale-105 flex-shrink-0">
                            Claim 1 Aerocoin
                        </button>
                    </div>

                    <p id="airdropMessage" class="mt-4 text-center text-lg font-medium hidden"></p>

                    <!-- Airdrop Address List -->
                    <div class="mt-8 pt-4 border-t border-gray-700/50">
                        <h5 class="text-xl font-semibold text-aero-light mb-4" data-localize="airdrop_list_title">Recent Airdrop Claims</h5>
                        <ul id="airdropAddressesList" class="space-y-2 max-h-48 overflow-y-auto p-2 input-style rounded-lg border border-gray-700/50 shadow-inner">
                            <p class="text-gray-500 italic" data-localize="airdrop_address_placeholder">No airdrops claimed yet.</p>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Burn Voting Section -->
        <section id="voting" class="py-20 section-bg-dark">
            <div class="max-w-4xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-light mb-12" data-localize="voting_title">Decentralized Burn Voting (100 AERO)</h3>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Voting Mechanism -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-primary border">
                        <h4 class="text-xl font-semibold text-aero-light mb-4" data-localize="vote_input_title">Vote for the Monthly Burn Date</h4>
                        <p class="text-gray-500 mb-4 text-sm" data-localize="vote_input_desc">Select a date within the **next month** (YYYY-MM-DD). Only one vote per unique user is allowed.</p>
                        
                        <input type="date" id="burnDateInput" class="w-full p-3 rounded-lg input-style border focus:border-aero-blue focus:ring-1 focus:ring-aero-blue mb-4 shadow-inner">
                        
                        <button onclick="voteForBurnDate()" id="voteButton" class="w-full bg-aero-blue text-gray-900 font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-aero-blue/80 transition hover:shadow-aero-blue/50" data-localize="btn_vote">
                            Submit Vote
                        </button>
                        <p id="voteMessage" class="mt-4 text-center text-lg font-medium hidden"></p>
                    </div>

                    <!-- Voting Results -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-accent border">
                        <h4 class="text-xl font-semibold text-aero-light mb-4" data-localize="vote_results_title">Current Voting Results (Next Burn)</h4>
                        <div class="mb-4">
                            <p class="text-sm font-bold text-aero-blue" data-localize="vote_winning_date">Winning Burn Date:</p>
                            <p id="winningDate" class="text-2xl font-mono text-red-400 mt-1" data-localize="vote_no_votes">No date yet.</p>
                            <p class="text-sm text-gray-500 mt-2" data-localize="vote_total_votes">Total Votes: <span id="totalVotesCount">0</span></p>
                        </div>
                        
                        <div id="votingResults" class="space-y-3 max-h-48 overflow-y-auto p-2">
                            <p class="text-gray-500 italic" data-localize="vote_no_votes_full">No votes cast yet for the next month.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Burn History -->
                <details class="mt-12 card-bg p-6 rounded-xl shadow-lg border-t border-gray-700/50">
                    <summary class="text-xl font-bold text-aero-light cursor-pointer" data-localize="history_title">Burn History (Executed Burns)</summary>
                    <div id="burnHistoryList" class="mt-4 pt-4 max-h-60 overflow-y-auto">
                        <p class="text-gray-500 italic" data-localize="history_no_data">No burn history found.</p>
                    </div>
                </details>

            </div>
        </section>
        
        <!-- Public Chat/Forum Section -->
        <section id="forum" class="py-20 section-bg-light">
            <div class="max-w-4xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-blue mb-12" data-localize="forum_title">AERO Public Forum (Chat)</h3>

                <div class="card-bg p-6 rounded-xl shadow-2xl border-t-4 border-aero-blue/50 border">
                    <!-- Message Display Area -->
                    <div id="chatMessages" class="h-64 overflow-y-auto mb-4 p-3 input-style rounded-lg border border-gray-600 shadow-inner flex flex-col-reverse">
                        <!-- Messages will be injected here -->
                    </div>
                    
                    <div class="flex space-x-3">
                        <input type="text" id="chatInput" class="flex-grow p-3 rounded-lg input-style placeholder-gray-500 border border-aero-blue/30 focus:border-aero-blue focus:ring-1 focus:ring-aero-blue shadow-inner" placeholder="Type your public message here..." data-localize-placeholder="chat_input_placeholder" onkeydown="if (event.key === 'Enter') sendMessage()">
                        
                        <button onclick="sendMessage()" id="chatSendButton" class="bg-aero-blue text-gray-900 font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-aero-blue/80 transition flex-shrink-0 hover:shadow-aero-blue/50" data-localize="chat_send_btn">
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-20 section-bg-dark">
            <div class="max-w-4xl mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-aero-light mb-12" data-localize="faq_title">Frequently Asked Questions (FAQ)</h3>

                <div class="space-y-6">
                    <!-- Q1 -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-primary border">
                        <h4 class="text-xl font-semibold text-aero-light mb-2" data-localize="faq_q1">What is the utility of Aerocoin?</h4>
                        <p class="text-gray-500" data-localize="faq_a1">Aerocoin is primarily a deflationary asset designed for value preservation and speculation due to its extreme scarcity and the developer's burn commitment. Future utility will depend on community development and potential ecosystem integration.</p>
                    </div>
                    <!-- Q2 -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-primary border">
                        <h4 class="text-xl font-semibold text-aero-light mb-2" data-localize="faq_q2">What is the purpose of the burn mechanism?</h4>
                        <p class="text-gray-500" data-localize="faq_a2">The burn mechanism is a manual process executed by the developer to continually reduce the circulating supply. This reduction increases the scarcity of AERO, aiming to counteract selling pressure and support long-term price appreciation.</p>
                    </div>
                    <!-- Q3 -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-primary border">
                        <h4 class="text-xl font-semibold text-aero-light mb-2" data-localize="faq_q3">Why only 800,000 total supply?</h4>
                        <p class="text-gray-500" data-localize="faq_a3">The highly limited supply is the core pillar of Aerocoin's value proposition. Unlike inflationary tokens, AERO is positioned as a rare, high-value asset, making every unit proportionally more significant.</p>
                    </div>
                    <!-- Q4 -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-accent border">
                        <h4 class="text-xl font-semibold text-aero-light mb-2" data-localize="faq_q5">When will all tokens be burned, and what happens then?</h4>
                        <p class="text-gray-500" data-localize="faq_a5">If the monthly burn commitment of 100 AERO continues, it would take several millennia to burn all 800,000 tokens. However, the true purpose is not total destruction, but to establish a constant deflationary pressure.</p>
                    </div>
                    <!-- Q5 -->
                    <div class="card-bg p-6 rounded-xl shadow-lg border-l-4 card-border-primary border">
                        <h4 class="text-xl font-semibold text-aero-light mb-2" data-localize="faq_q4">How can I acquire AERO?</h4>
                        <p class="text-gray-500" data-localize="faq_a4">AERO can be acquired through decentralized exchanges (DEXs) on the Binance Smart Chain (BSC) after its official listing. Always use the official contract address (0x19F7ac2439143E7d63a8B55AD7242036897647cA).</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="p-6 border-t border-aero-blue/20 text-center shadow-inner" style="background-color: var(--nav-bg);">
        <p class="text-sm text-gray-500" data-localize="footer_copy">
            漏 2024 Aerocoin (AERO). A scarcity project powered by the community on BSC.
        </p>
        <p class="text-xs text-gray-500 mt-2">
            Contract: 0x19F7ac2439143E7d63a8B55AD7242036897647cA
        </p>
    </footer>
</body>
</html>
